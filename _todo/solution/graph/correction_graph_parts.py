#coding:latin-1
from tutoriel_119 import *

# tutoriel_graphe
noeuds = {0: 'fr\xe9quemment.', 1: 'je', 2: 'dit', 3: '\xeatre', 4: 'Code",', 5: 'incident', 6: 'dernier', 7: 'de', 8: '\xe0', 9: 'go\xfbt', 10: 'celui-l\xe0.', 11: 'pour', 12: 'plus', 13: 'prendre', 14: 'commenter', 15: '\xe9quilibr\xe9', 16: 'inconsciemment', 17: ':', 18: 'vous', 19: 'pr\xe9f\xe8re', 20: 'moyen', 21: 'doute,', 22: 'de', 23: 'les', 24: 'les', 25: "l'ann\xe9e", 26: 'se', 27: "c'est", 28: 'je', 29: 'am\xe9ricain.', 30: 'de', 31: 'raconter', 32: 'livre,', 33: 'se', 34: 'sarcasmes', 35: 'derni\xe8re', 36: 'ce', 37: '\xe0', 38: 'changent,', 39: 'une', 40: 'soutient', 41: 'sens', 42: 'est', 43: 'Minelli,', 44: 'est', 45: "n'ai", 46: 'est', 47: 'une', 48: '\xe7a,', 49: 'pour'}
arcs   = {(13, 22): None, (0, 7): None, (24, 4): None, (40, 41): None, (2, 22): None, (1, 6): None, (32, 31): None, (42, 35): None, (44, 34): None, (8, 24): None, (6, 7): None, (37, 48): None, (19, 14): None, (25, 26): None, (16, 22): None, (30, 42): None, (29, 34): None, (5, 3): None, (18, 20): None, (37, 41): None, (44, 39): None, (25, 38): None, (31, 38): None, (4, 16): None, (11, 0): None, (10, 24): None, (7, 5): None, (47, 40): None, (17, 20): None, (27, 40): None, (15, 24): None, (15, 1): None, (29, 37): None, (2, 17): None, (41, 45): None, (40, 35): None, (13, 23): None, (34, 41): None, (1, 12): None, (37, 44): None, (5, 14): None, (10, 14): None, (11, 15): None, (15, 16): None, (30, 45): None, (11, 16): None, (30, 32): None, (20, 3): None, (3, 11): None, (42, 47): None, (2, 12): None, (5, 1): None, (30, 43): None, (14, 22): None, (0, 21): None, (49, 41): None, (26, 29): None, (31, 47): None, (25, 43): None, (22, 7): None, (44, 46): None, (26, 33): None, (27, 44): None, (16, 23): None, (4, 14): None, (46, 27): None, (0, 9): None, (1, 19): None, (7, 18): None, (19, 23): None, (29, 46): None, (27, 31): None, (0, 8): None, (23, 24): None, (4, 11): None, (2, 7): None, (43, 39): None, (4, 6): None, (25, 37): None, (9, 23): None, (7, 4): None, (6, 20): None, (5, 20): None, (16, 20): None, (32, 42): None, (32, 39): None, (3, 15): None, (1, 3): None, (28, 29): None, (10, 15): None, (8, 19): None, (45, 48): None, (11, 14): None, (31, 30): None, (1, 20): None, (17, 15): None, (4, 20): None, (29, 40): None, (42, 44): None, (37, 46): None, (23, 15): None, (26, 46): None, (14, 23): None, (29, 48): None, (11, 13): None, (0, 22): None, (6, 18): None, (30, 47): None, (1, 23): None, (36, 46): None, (23, 20): None, (38, 46): None, (43, 49): None, (49, 38): None, (12, 0): None, (11, 8): None, (29, 32): None, (34, 36): None, (1, 18): None, (31, 45): None, (13, 18): None, (33, 42): None, (24, 13): None, (21, 7): None, (33, 31): None, (42, 49): None, (4, 10): None, (38, 43): None, (9, 22): None, (15, 31): None, (27, 42): None, (16, 21): None, (47, 39): None, (13, 8): None, (12, 16): None, (24, 0): None, (18, 19): None, (3, 8): None, (5, 12): None, (3, 14): None, (36, 31): None, (47, 26): None, (30, 38): None, (29, 38): None, (1, 24): None, (41, 46): None, (18, 24): None, (42, 45): None, (37, 45): None, (44, 29): None, (33, 47): None, (19, 20): None, (17, 4): None, (7, 9): None, (26, 27): None, (30, 35): None, (32, 37): None, (22, 5): None, (36, 45): None, (43, 26): None, (2, 15): None}
points = [(0.95267535699124162, 0.82560629131856578), (0.29648364156865914, 0.18050600487154633), (0.79996985136162935, 0.57893660071459829), (0.085376952582970955, 0.031034879282891392), (0.016348760649931293, 0.50115702327334655), (0.74771613576024176, 0.44138768803286821), (0.5492358527201977, 0.81850752511271008), (0.95542745148916108, 0.17816204660413593), (0.99050031891464319, 0.24851774111600722), (0.59460011551737468, 0.37389676235300828), (0.18654793854244078, 0.6840075536088509), (0.14657352787860223, 0.99366919091486383), (0.20017263306996014, 0.36275912353643147), (0.94074045424419872, 0.0072132133182595259), (0.61740384464135112, 0.43686790737625958), (0.66539931762342697, 0.55679917050743688), (0.45015730018055056, 0.31099714183225291), (0.12415928874693283, 0.71076075162623464), (0.68924309228021652, 0.31141865520722745), (0.10516400088906552, 0.58731899757629535), (0.12188375680883579, 0.51881747990793747), (0.07558429625479568, 0.043497856810040703), (0.13026049803968498, 0.54683395827968562), (0.52712532997481876, 0.17157989187856604), (0.45114145954948592, 0.70617762309961618), (0.56406777662890695, 0.71132385696741118), (0.55461691931730994, 0.29547405922511316), (0.099441144430514661, 0.36779227191569108), (0.49402620743521286, 0.35145024932175195), (0.63613038961532231, 0.51163660427562563), (0.55581345719517494, 0.071142652579506804), (0.33592381455203424, 0.42007024413872029), (0.40672043722017814, 0.056365679688573422), (0.62027382936709818, 0.35952751815993511), (0.71720130482031286, 0.92410962623683579), (0.32551467496845776, 0.065920384323213677), (0.84569564126604313, 0.23703980163205995), (0.42807674751831126, 0.054150904243620013), (0.64062636462843214, 0.15042491134125857), (0.48100807171343629, 0.14134222101625216), (0.40180636763784205, 0.99474182532249189), (0.27948653677901758, 0.71630115956590457), (0.15535336634912322, 0.34851408508671899), (0.45298028214932573, 0.32066296654826165), (0.44862985083939377, 0.30547670650187053), (0.029256933006530872, 0.73724241682736447), (0.15622132444455183, 0.21521612682099767), (0.11690710489512957, 0.4786251875596268), (0.50738236737590658, 0.51986175679349422), (0.55108314047038542, 0.57095630870069658), (0.73093092106169111, -3.9925338781977224), (1.9199614425637721, -4.9962543381481126), (4.0439915887357065, 3.8498484270922391), (-3.40709035308348, 0.39775864157910079), (4.0730819072938669, 3.2890212795827303), (-3.7742136951993408, -3.1123669548128072), (-4.9860229704641412, -0.33930202390130337), (1.1480453006246507, 5.3709879064645794), (4.0440299719273201, -3.1359324647302684), (-0.44887083769379277, -3.3799423541322735), (3.4398670515279557, 3.8334059332033497), (0.76952265995298075, -4.0625181910119244), (1.6956587062968544, -3.3744478144946441), (-0.10396158258453836, -5.0743258686216315), (-3.9534018707169429, -2.5038913982934172), (4.7680866941585229, 0.81715016175569477), (-0.42862569608862167, 5.8432707351932933), (1.518614059709694, 5.1977766227862325), (-1.1242218799970169, -4.6179402103967639), (-1.4258244150043791, -4.1685616113702944), (1.9409162750433124, -4.7404641006556236), (1.1435464790122816, 4.0279467283359454), (0.38121779630834041, 3.8382568106291739), (4.2044759346207483, -2.3148006282830065), (-5.7363326915308024, -2.9192244608795028), (3.2495073925554618, -4.0573216044653897), (0.32372336455076411, -3.9912555547264752), (-0.90791219358485331, 3.9787696565918154), (3.6256474234954226, 4.8226560186800373), (-3.8963553456339688, 1.1198210722224913), (3.3604780169461765, -3.5642594588211649), (1.687058366889852, -6.210927082177248), (-5.0088975511144023, 2.2360658464462815), (0.37106204009035448, -4.4457015129313913), (3.9649514458322459, -3.3070905420671415), (-1.8819631023110905, 3.3200252718097296), (-2.6843465848858159, 2.0533835595291654), (-3.2557819026437267, 1.5973998477974416), (4.6885709328444847, -1.2173870239662024), (2.404962474396116, 5.5064199228937731), (4.1216693489758471, -3.5030595862817462), (1.0944087405444316, 4.9129405674584641), (-5.9103174847844873, 1.9114254460109923), (-4.132188963311493, 1.4022043343548183), (-1.1020149832348243, 3.5636367949517318), (2.664931398644931, -4.3052248468766985), (-3.5601955924295829, -1.9443401692133171), (-4.201585463270586, -3.8511178493837335), (-4.5260781255083566, -1.3173319537940902), (-3.5520622021177473, 4.5357043246405819), (-2.3077280555810677, -2.6714981243721976), (-1.8571447222954365, -1.9519861881351419), (-3.2255068414551546, 3.1795664716329615), (-4.4482213664716559, -4.2185611163633974), (-3.9997974009755564, -2.5517555288239171), (-4.8699798695561576, -3.9692238738753982), (3.3151561188844925, -0.55206233883637235), (3.9438026346904129, -3.0304323218823326), (-4.7094073035463007, -3.8287671974811586), (2.1914918183775023, 1.1556602211075755), (2.239822051268634, -5.2980602701664683), (2.3595979948449535, -0.3398618231136934), (3.4516151992690514, -1.4120593478012067), (-4.1621980502057756, 1.8975419998882086), (2.7428097192268956, -0.30002875549521779), (4.3605014242243074, 1.3503549800798575), (5.2613590378052635, 2.1022774759999576), (3.6367225250843793, -3.1716591169498045), (4.6726118996244095, -1.2790433464904203), (4.9058044780104595, -2.1364525616895911), (0.069636008996937004, -2.5735387007511115), (-2.3129926401371748, -2.8967224927343578), (4.8127318966269534, -1.0852430298581375), (-4.3260746865404673, -1.5492672712798914), (2.302625177338677, -3.7148086473256443), (5.1338859559296068, 2.9533293912327001), (1.3625934799042121, 3.1298364974715676), (-4.5114122266499832, -3.3542526117819542), (-4.326594346630996, -1.7921498252383388), (2.7026843300795145, -0.014530189102330074), (-2.722907308307938, 2.7453464789348763), (-5.083591175043483, -0.30615128717542933), (-4.4586660147794506, -5.0971750441048398), (-2.2315188766141807, 1.9005390242378848), (-5.987594485873192, 2.4785543875512492), (1.1221786043911814, -4.0861810554465618), (4.1750084684753421, 1.6969862360709904), (3.6859080775408026, 6.1851460026850944), (2.9214278188299945, -2.9093405748617487), (3.7000980748880048, 3.1807433447418449), (-3.3630507245753694, -4.8588967519552382), (-0.26921474742305929, 4.9015232652416945), (3.1407992489793077, 2.501535088460213), (-4.6378352522239554, 0.71224131017907655), (2.9680366726671408, 3.8057463470229771), (-4.3923934213067932, -1.3791542744104026), (-4.2053686108626351, -3.6915210305842443), (-2.0746723787889829, -5.4464802222512967), (-4.0996534303685408, 3.3267880265107594), (-1.8128378443025992, -3.9344867995823476), (-3.2353459560678726, 0.0078487639308876256), (-5.2567050348371964, -2.8358582468324252), (-2.2350770635882338, 4.8035421802935794), (4.5454547247951318, 3.8505415523103865), (0.77852150481602367, -6.304360789570536), (2.8006251537057874, -3.4054180128674925), (0.80971629500490194, 3.8065008164142045), (-4.6893071013407308, 2.2137047680876876), (3.3741845332290392, 0.1809403893940662), (-3.2918652308459055, 0.090757607140976582), (-2.731021645889272, -1.6662800739451944), (4.1392456836843463, -2.6535938902245615), (0.46602710316953699, 2.1099910099056247), (-0.99288504381124265, -3.635131537333915), (-3.4662675388435948, -0.058701426738028029), (-2.9999952003703356, 0.97385236270124387), (3.2650338417095948, -3.8196135607333344), (-3.9456323778158917, 1.6498531850237104), (3.4959780062736767, -4.7693709944976597), (-6.3793247897778178, 3.7936917868316788), (-2.8361948828141816, -1.4723239541777753), (-3.4585466204767146, -3.8744844913637744), (2.960095790660457, -4.8884709834126614), (-1.2993953267806311, 4.0973104894384376), (-3.0970989922258405, 0.22866598184118958), (3.4437835364866913, -0.8809379622205642), (-1.2881813072780375, -4.1229601681474559), (5.4862812324101551, 1.836628009823206), (3.1236304949998903, -4.1524561478238979), (0.61467544773508809, -5.1189666093912951), (1.8730432423071945, -4.3249847084872606), (2.0752011951950715, -4.4488200981023773), (-5.3418920228459292, -2.9894449162072085), (0.88838354958991195, 4.7891995309050168), (-2.9815280097655044, 0.75974611993798513), (-4.4459283100583553, -2.8427774445017384), (-4.064198055377803, -0.26016925859548712), (3.9592858553113812, 5.7062659782102383), (-4.0776456770357399, -2.1108468150902038), (2.80041795823937, 3.9790775056847605), (0.78487223802603201, -4.2564317334246189), (-4.9580286073678153, -4.3043816295110746), (-2.7669760995888444, -2.5651126393631269), (-3.9254876523953905, -3.5085487626888177), (-3.7540103697600991, 3.7300659425632596), (3.6783559669906869, -2.351144064434612), (4.0933414500950187, 4.5060014596068578), (3.7335394329236813, 1.0973237757208787), (1.1442075030227594, -4.2316977637013782), (-3.6220150980624424, 3.185201907480816), (-2.2337125392446318, 4.3478035180013368), (2.6781697617925388, 2.2280922113698827), (-1.6681130570090124, 4.7186880822137711), (3.4525222878110728, 2.8129919629877103), (-4.2615596708093531, -2.7146058843073311), (-3.4402593724261346, -3.1673759335208658), (3.1774382402490873, -4.8863913791911475), (3.5356594608336036, -2.1183528278045651), (5.4668883824812955, 0.96389044748342978), (-3.6545253298129072, 1.191029553432321), (2.4693389761239732, -4.3812421972626314), (-4.7093027774610103, 3.965026191026729), (3.2404707985524244, 0.77619181600786824), (3.0540906215419827, -0.28806712267986057), (-3.6028130521113049, 1.935895100383537), (-3.3489404619836742, 2.4563658827640311), (-2.4889130194431983, -2.2068778228055628), (-4.8626794620087885, -2.8453503859189597), (-5.281369798564187, 3.5735280155556834), (1.6030813205100574, 3.5731475337773819), (-2.1025461390993794, 3.4422700241336504), (-4.2729514664802686, 0.98295236061849844), (-2.7317907928709642, 3.817432925064046), (-3.347758848146241, -2.5448741023523311), (0.8915743485505736, -2.2569697596670535), (3.5045925916795215, 3.2722443198059601), (3.5998395703577524, 3.2190081781102129), (1.4334706104985417, -4.0424849300410903), (-4.0667426219862737, -1.4761924494221059), (2.1740645996991859, -3.0289758518776351), (-2.4038443669649543, 3.0160752773304909), (-4.0303363017873819, 2.7543768490206029), (0.47537794879953099, 2.8085335721228395), (1.6413771309213714, -4.3558686770090542), (-5.1433034570264313, 1.9430061162740762), (1.8276873292623577, -3.6790602249992337), (4.1406942586495843, 1.3675393354116923), (3.3480076038224218, 4.721175565871162), (4.4634711149083595, -2.8871256008130279), (5.7357361409997534, 3.4008106446903601), (-3.0916329376751204, -4.0216467418174098), (-0.3493957952197404, -3.9951380224963402), (-4.7778083762237662, 0.26542128046507107), (1.403043362648535, -5.9337467353513125), (-3.8601684384095898, 2.4274964923790896), (-2.3093328988302524, 2.5925313771583451), (5.1033208593702017, -0.46327358367228422), (-4.1094019584172159, -2.6861910724662836), (-0.57183320351506084, -4.365390016818222), (-5.0613329560272344, -0.92832778971832219)]


###################################### Question 3 ################
#je définis une fonction qui va me servir pour NombreTotalNoeud
def action(a,liste):
		for e in a.arcs:
			if e not in liste:
				liste+=[e]
				action(e,liste)
	
	
class MonGraphe :
	def __init__ (self, num, valeur) :
		self.valeur = valeur
		self.num = num
		self.arcs = []
	def NombreTotalNoeud (self) :
		connus=[self]       #je définis ma liste de sommets connus
		for a in self.arcs: action(a,connus)   #j'applique l'action qui consiste à ajouter des sommets non connus
		return len(connus)
	def Degre (self):
		return len(self.arcs)

	
###################################### Question 4 ################




def ConstruireMonGraphe (noeuds, arcs):
	l = []
	for i in noeuds:
		l += [ MonGraphe(i,noeuds[i]) ]
	for (a,b) in arcs :
		l [a].arcs += [ l [b] ]
		l [b].arcs += [ l [a] ]
	return l
	
graphe = ConstruireMonGraphe(noeuds,arcs)

#definition d'une fonction pour afficher le graphe
def afficher(graphe):
	for e in graphe:
		print e.num, e.valeur, [a.num for a in e.arcs]
			
afficher(graphe)
#print '**********************'






###################################### Question 5 ################


 
#for i in xrange(0,len(graphe)):
#	print graphe[i].NombreTotalNoeud()

#cette fonction retourne une erreur car elle boucle sur elle-même
#si b est dans a.arcs alors elle se rappelle car a est dans b.arcs
#il faut retenir les noeuds déja traités

#voir question 3 pour la fonction corrigée
#sinon on peut faire le meme principe que pour le graphe sur les amis

###################################### Question 6 ################

#voir partie de la question 3



###################################### Question 7 ################

#l'algorithme permet de diminuer le nombre d'aretes
#ici il reviendrait à recouvrir avec le moinds d'aretes possibles
#mais il ne permet pas de faire ce qu'on veut
#une fois qu'on a l'arbre minimal, si on coupe on ne sait pas combien d'aretes on coupe en réalité


###################################### Question 8 ################

#voir dans la définition de class MonGraphe
#ou sinon
def Deg(numero):
	return len( graphe[numero].arcs )
	
print graphe[0].Degre()
print '*****************'



###################################### Question 9 ################

n=len(graphe)    #n*n sera la taille de la matrice
import numpy as np  
import scipy.linalg
M = np.matrix(  [[0 for i in xrange(0,n)] for j in xrange(0,n)]   )   #construction d'une matrice de 0 de taille n*n

#je définis une fonction qui me donne le coefficient i,j
def laplacien(i,j):
	if i==j : return graphe[i].Degre()
	elif graphe[j] in graphe[i].arcs: return -1
	else: return 0

#je modifie ma matrice en appliquant cette fonction
for i in xrange(0,n):
	for j in xrange(0,n):
		M[i,j] = laplacien(i,j)
		
#quelques vérifications
print M[2,2]
print Deg(2) 
print M[20,17]
print M[41,0]

###################################### Question 10 ################

#pour vérifier que toutes les sommes de ligne sont nulles
b=True
i=0
while b==True and i<n:
	if sum ( M[:,j] ) <>0: b=False
	i+=1
print b

V=np.matrix ( [1 for i in xrange(0,n) ])
#print M*V.transpose()

###################################### Question 11 ################

L,P = np.linalg.eig(M)
print L,P
P=P.transpose()
print P[2]
#print M*P[2].transpose()-L[2]*M

###################################### Question 12 ################

pos=[ (L[i],i) for i in xrange(0,len(L)) ]
pos.sort()
print pos
vecteursp= [ P[i] for (a,i) in pos ]
#le premier vecteur propre associé à une valeur propre non nulle est le 2e


V = vecteursp[1]
print V
	
#une fois qu'on a le vecteur propre en question
#on peut construire une liste pour chaque composante
compneg = []
comppos = []
for i in xrange(0,50):
	if V[0,i]<0 : compneg += [graphe [i]]
	else : comppos += [graphe [i]]

def nombre_arcs(sommet):
	def nombre_arcs_liste(comp):
		r=0
		for n in comp:
			if n in sommet.arcs : r += 1
		return r
	if sommet in compneg : return nombre_arcs_liste(comppos)
	else : return nombre_arcs_liste(compneg)
	
print [a.num for a in comppos], [a.num for a in compneg]

r=0
for sommet in graphe:
	if sommet in comppos:
		r+= nombre_arcs(sommet)
print r
	
r=0
for sommet in graphe:
	if sommet in compneg:
		r+= nombre_arcs(sommet)
print r

#pour savoir quelle est l'arête à couper
for a in comppos:
	for b in compneg:
		if a in b.arcs : print (a.num,b.num)